(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{6601:function(){},9698:function(e,t,r){Promise.resolve().then(r.bind(r,1900))},1900:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),s=r(2265),a=r(8782),o=r(5097),l=r(3781);r(5438);var i=r(9824);function c(e){let[t,r]=(0,s.useState)(!1),[n,a]=(0,s.useState)(0);return(0,s.useEffect)(()=>{r(!0),(async()=>{if(r(!0),null==e?void 0:e.address)try{let t=await fetch("https://api.jup.ag/price/v2?ids=".concat(e.address));if(!t.ok)throw Error("Failed to fetch tokens: ".concat(t.status));let n=await t.json();a(n.data["".concat(e.address)].price),r(!1)}catch(e){console.error("Error fetching tokens:",e)}finally{r(!1)}})()},[e]),{secondTokenPrice:n,fetchingUSD:t}}var u=r(5429),d=r(6592),m=r(9109).Buffer;function p(){let e=null,t=["https://mainnet.helius-rpc.com/?api-key=36630f30-eb16-4b14-90bd-1de494fdddbd","https://solana-mainnet.g.alchemy.com/v2/VmNxXlLtr1Q4R0QiuoagXO6FD8Fvi9rz","https://solemn-proportionate-sailboat.SOLANA_MAINNET.quiknode.pro/3618d14c4338e3d38b39e240684327a449612425/"],r=0;async function p(){let e=t.length;for(let n=0;n<e;n++){let e=t[r],n=new u.Connection(e);try{return await n.getEpochInfo(),n}catch(n){console.error("Connection failed for ".concat(e,":"),n.message),r=(r+1)%t.length}}throw Error("All RPC nodes are currently unavailable")}let[f,h]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[g,w]=(0,s.useState)([]),[y,v]=(0,s.useState)(g[0]),[j,N]=(0,s.useState)(g[1]),[k,O]=(0,s.useState)(),{secondTokenPrice:C}=c(y),[E,P]=(0,s.useState)(0),[S,T]=(0,s.useState)(""),{publicKey:I,connected:A,wallet:M,signTransaction:L}=(0,a.O)(),[z,R]=(0,s.useState)(!1),[D,F]=(0,s.useState)(!1),{secondTokenPrice:_,fetchingUSD:W}=c(j),q=g.filter(e=>e.symbol.toLowerCase().includes(S.toLowerCase()));async function B(e,t,r){try{let n=await fetch("https://api.jup.ag/swap/v1/quote?inputMint=".concat(e,"&outputMint=").concat(t,"&amount=").concat(r,"&slippageBps=").concat(50,"&restrictIntermediateTokens=true&onlyDirectRoutes=true"));if(!n.ok)throw Error("Failed to fetch quote: ".concat(n.statusText));return await n.json()}catch(e){throw e}}(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/tokens");if(!e.ok)throw Error("Failed to fetch tokens: ".concat(e));let t=await e.json();w(t),t.length>0&&(v(t[0]),N(t[1]))}catch(e){console.error("Error fetching tokens:",e)}})()},[]),(0,s.useEffect)(()=>{let e;let t=async()=>{if(!isNaN(Number(k))&&(null==y?void 0:y.address)&&(null==j?void 0:j.address))try{h(!0);let e=await fetch("https://api.jup.ag/swap/v1/quote?inputMint=".concat(y.address,"&outputMint=").concat(j.address,"&amount=").concat(Number(k)*Math.pow(10,Number(y.decimals)),"&slippageBps=50&restrictIntermediateTokens=true"));if(!e.ok){h(!1);let t=await e.json();throw Error("Failed to get Quotes: ".concat(t))}let t=await e.json(),r=Number(t.outAmount)/Math.pow(10,Number(j.decimals));P(r)}catch(e){console.error("Error fetching tokens:",e)}finally{h(!1)}};return t(),e=setInterval(()=>{t()},3e3),()=>clearInterval(e)},[k,y,j]);let $=async()=>{if(!I||!M||!L){console.error("Wallet is not connected or does not support signing.");return}try{b(!0);let t=await p(),r=0,n=null;for(;r<5;){let s=new AbortController,a=setTimeout(()=>s.abort(),15e3);try{e&&(clearInterval(e),e=null,console.log("Monitoring paused during swap."));let r=await B(y.address,j.address,(null!=k?k:0)*Math.pow(10,Number(y.decimals)));console.log("Quote Data:",r);let n=await fetch("https://api.jup.ag/swap/v1/swap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quoteResponse:r,userPublicKey:I.toString(),dynamicComputeUnitLimit:!0,prioritizationFeeLamports:{priorityLevelWithMaxLamports:{maxLamports:2e5,priorityLevel:"medium"}}}),signal:s.signal});if(clearTimeout(a),!n.ok)throw Error("API Error: ".concat(n.status," - ").concat(await n.text()));let o=await n.json();if(!(null==o?void 0:o.swapTransaction))throw Error("Invalid swap response from API");let l=u.VersionedTransaction.deserialize(m.from(o.swapTransaction,"base64")),i=(await L(l)).serialize(),c=await t.sendRawTransaction(i,{maxRetries:2,skipPreflight:!1}),p=await t.confirmTransaction({signature:c,...await t.getLatestBlockhash()},"finalized");if(p.value.err)throw Error("Transaction failed: ".concat(JSON.stringify(p.value.err)));return d.ZP.success("Transaction successful: https://solscan.io/tx/".concat(c,"/")),console.log("Transaction successful: https://solscan.io/tx/".concat(c)),b(!1),c}catch(s){clearTimeout(a),n=s;let{shouldRetry:e,delay:t}=function(e,t,r){let n=2e3*Math.pow(2,t);if(429===e.status){var s;let t=null===(s=e.headers)||void 0===s?void 0:s.get("Retry-After");return t&&(n=Math.max(n,1e3*parseInt(t))),{shouldRetry:!0,delay:n}}return[e.message.includes("Invalid input parameters"),e.message.includes("Invalid swap response"),e.status>=400&&e.status<500].some(e=>e)?{shouldRetry:!1,delay:0}:"AbortError"===e.name||e.message.includes("network")?{shouldRetry:!0,delay:n}:{shouldRetry:!0,delay:n}}(s,r,0);if(!e||r>=4){console.error("Swap failed after maximum retries:",n);break}console.log("Retrying in ".concat(t/1e3," seconds...")),await new Promise(e=>setTimeout(e,t)),r++}finally{}}throw b(!1),n}catch(e){throw console.error("Swap execution failed:",e),b(!1),e}};return(0,n.jsx)("div",{className:"h-full flex items-center justify-center bg-black",children:(0,n.jsxs)("div",{className:"relative w-[35%] h-[75vh] flex flex-col gap-3",children:[(0,n.jsx)("div",{className:"absolute top-[46.5%] left-[50%] w-[33px] h-[33px] items-center flex justify-center border-[1px] rounded-md z-1 bg-[#141414] transform -translate-x-1/2 ",onClick:()=>{j&&v(j),N(y)},children:(0,n.jsx)(l.CSs,{size:22,color:"white"})}),(0,n.jsx)("p",{className:"text-[28px] text-white text-center font-medium",children:"STAY INVISIBLE"}),(0,n.jsxs)("div",{className:"w-full rounded-[18px] border h-[40%] p-6 bg-[#101012]",children:[(0,n.jsx)("p",{className:"mb-2 text-[14px] text-[#CDCDCF] font-semibold",children:"SELL"}),(0,n.jsxs)("div",{className:"flex justify-between items-center text-white",children:[(0,n.jsx)("input",{type:"number",value:k,placeholder:"0",onChange:e=>O(Number(e.target.value)),className:"text-[25px] font-semibold bg-transparent border-none outline-none overflow-none"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{className:"w-full flex items-center px-4 py-2 gap-2 border border-gray-600 rounded-md bg-gray-800 text-white",onClick:()=>R(!0),children:[(0,n.jsx)("img",{src:null==y?void 0:y.logo,alt:null==y?void 0:y.symbol,className:"w-6 h-6 mr-1 rounded-full"}),null==y?void 0:y.symbol,(0,n.jsx)(i.OId,{})]}),z&&(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,n.jsxs)("div",{className:"bg-gray-900 p-5 rounded-lg w-[35%]",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h2",{className:"text-white text-lg",children:"Select a Token"}),(0,n.jsx)("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),(0,n.jsx)("input",{type:"text",placeholder:"Search token...",className:"outline-none w-full mt-3 px-3 py-2 rounded-md bg-gray-800 text-white ",onChange:e=>T(e.target.value)}),(0,n.jsx)("div",{className:"mt-3 max-h-60 overflow-y-auto",children:q.map(e=>(0,n.jsxs)("button",{className:"w-full flex items-center px-4 py-2 hover:bg-gray-700 rounded-md text-white",onClick:()=>{v(e),R(!1)},children:[(0,n.jsx)("img",{src:e.logo,alt:e.symbol,className:"w-6 h-6 mr-2 rounded-full"}),e.symbol]},e.address))})]})})]})]}),(0,n.jsxs)("div",{className:"w-full mx-auto items-center flex justify-between mt-8",children:[(0,n.jsxs)("p",{className:"font-semibold text-[15px]",children:["$",(null!=k?k:0)*C]}),(0,n.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,n.jsx)(o.yh$,{size:23}),(0,n.jsx)("span",{className:"text-[15px]",children:"1.2415"}),(0,n.jsx)("div",{className:"w-[45px] h-[25px] rounded-md font-semibold flex items-center justify-center text-[14px] bg-[#262628]",children:(0,n.jsx)("span",{className:"text-[12px] font-semibold",children:"MAX"})})]})]})]}),(0,n.jsxs)("div",{className:"w-full rounded-[18px] border h-[40%] p-6 bg-[#101012]",children:[(0,n.jsx)("p",{className:"mb-2 text-[14px] font-semibold text-[#CDCDCF] ",children:"BUY"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("input",{type:"number",value:E,placeholder:"0",onChange:e=>P(Number(e.target.value)),className:"text-[25px] font-semibold bg-transparent border-none outline-none overflow-none text-white"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{className:"w-full flex items-center px-4 py-2 gap-2 border border-gray-600 rounded-md bg-gray-800 text-white",onClick:()=>F(!0),children:[(0,n.jsx)("img",{src:null==j?void 0:j.logo,alt:null==j?void 0:j.symbol,className:"w-6 h-6 mr-1 rounded-full"}),null==j?void 0:j.symbol,(0,n.jsx)(i.OId,{})]}),D&&(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,n.jsxs)("div",{className:"bg-gray-900 p-5 rounded-lg w-[35%]",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h2",{className:"text-white text-lg",children:"Select a Token"}),(0,n.jsx)("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),(0,n.jsx)("input",{type:"text",placeholder:"Search token...",className:"outline-none w-full mt-3 px-3 py-2 rounded-md bg-gray-800 text-white ",onChange:e=>T(e.target.value)}),(0,n.jsx)("div",{className:"mt-3 max-h-60 overflow-y-auto",children:q.map(e=>(0,n.jsxs)("button",{className:"w-full flex items-center px-4 py-2 hover:bg-gray-700 rounded-md text-white",onClick:()=>{N(e),F(!1)},children:[(0,n.jsx)("img",{src:e.logo,alt:e.symbol,className:"w-6 h-6 mr-2 rounded-full"}),e.symbol]},e.address))})]})})]})]}),(0,n.jsxs)("div",{className:"w-full mx-auto items-center flex justify-between mt-8",children:[(0,n.jsxs)("p",{className:"font-semibold text-[15px]",children:["$ ",E*_]}),(0,n.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,n.jsx)(o.yh$,{size:23}),(0,n.jsx)("div",{className:"w-[45px] h-[25px] rounded-md font-semibold flex items-center justify-center text-[14px] bg-[#262628]",children:(0,n.jsx)("span",{className:"text-[12px] font-semibold",children:"MAX"})})]})]})]}),(0,n.jsx)("button",{className:"w-full rounded-[10px] flex items-center justify-center bg-white text-black h-[50px] text-[16px] cursor-pointer font-medium",onClick:A?$:()=>{document.querySelector(".wallet-adapter-button").click()},disabled:x,children:x?"Swapping...":A?null===k?"Enter an Amount":"Swap":"CONNECT WALLET"})]})})}},5438:function(){},8782:function(e,t,r){"use strict";r.d(t,{O:function(){return i},z:function(){return l}});var n=r(2265);let s=[],a={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){o("call","select")},connect:()=>Promise.reject(o("call","connect")),disconnect:()=>Promise.reject(o("call","disconnect")),sendTransaction:()=>Promise.reject(o("call","sendTransaction")),signTransaction:()=>Promise.reject(o("call","signTransaction")),signAllTransactions:()=>Promise.reject(o("call","signAllTransactions")),signMessage:()=>Promise.reject(o("call","signMessage")),signIn:()=>Promise.reject(o("call","signIn"))};function o(e,t){let r=Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(r),r}Object.defineProperty(a,"wallets",{get:()=>(o("read","wallets"),s)}),Object.defineProperty(a,"wallet",{get:()=>(o("read","wallet"),null)}),Object.defineProperty(a,"publicKey",{get:()=>(o("read","publicKey"),null)});let l=(0,n.createContext)(a);function i(){return(0,n.useContext)(l)}},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return u}});var n=r(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(s),o=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,s;n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:s,size:a,title:i}=e,u=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,o),d=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==a?n.createElement(a.Consumer,null,e=>t(e)):t(s)}}},function(e){e.O(0,[813,814,452,706,779,907,971,23,744],function(){return e(e.s=9698)}),_N_E=e.O()}]);